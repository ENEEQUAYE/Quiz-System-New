<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Route Testing - Quick Fix Verification</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 600px;
            margin: 50px auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .test-container {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .result {
            margin: 10px 0;
            padding: 10px;
            border-radius: 5px;
        }
        .success {
            background-color: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        .error {
            background-color: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        button {
            background-color: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>Route Fix Verification</h1>
        <p>Testing the corrected route order for submissions count endpoint.</p>
        
        <button onclick="testRoutes()">Test Routes</button>
        <button onclick="clearResults()">Clear</button>
        
        <div id="results"></div>
    </div>

    <script>
        // Use remote API for testing
        const API_URL = "https://quiz-system-new.onrender.com/api";
        
        // Get token from localStorage (user should be logged in)
        const token = localStorage.getItem("token");
        
        async function testRoutes() {
            clearResults();
            
            if (!token) {
                addResult("‚ùå No token found. Please log in first.", "error");
                return;
            }
            
            addResult("üß™ Testing route fixes...", "success");
            
            // Test 1: Quiz count
            try {
                const response1 = await fetch(`${API_URL}/quizzes/count`, {
                    headers: { Authorization: `Bearer ${token}` }
                });
                const data1 = await response1.json();
                
                if (data1.success) {
                    addResult(`‚úÖ Quiz Count: ${data1.data}`, "success");
                } else {
                    addResult(`‚ùå Quiz Count Error: ${data1.error}`, "error");
                }
            } catch (error) {
                addResult(`‚ùå Quiz Count Failed: ${error.message}`, "error");
            }
            
            // Test 2: Submissions count
            try {
                const response2 = await fetch(`${API_URL}/quizzes/submissions/count`, {
                    headers: { Authorization: `Bearer ${token}` }
                });
                const data2 = await response2.json();
                
                if (data2.success) {
                    addResult(`‚úÖ Submissions Count: ${data2.data}`, "success");
                } else {
                    addResult(`‚ùå Submissions Count Error: ${data2.error}`, "error");
                }
            } catch (error) {
                addResult(`‚ùå Submissions Count Failed: ${error.message}`, "error");
            }
            
            addResult("üéâ Route testing completed!", "success");
        }
        
        function addResult(message, type) {
            const resultsDiv = document.getElementById('results');
            const div = document.createElement('div');
            div.className = `result ${type}`;
            div.textContent = message;
            resultsDiv.appendChild(div);
        }
        
        function clearResults() {
            document.getElementById('results').innerHTML = '';
        }
        
        // Auto-test if token exists
        if (token) {
            setTimeout(testRoutes, 500);
        } else {
            addResult("‚ÑπÔ∏è Please log in to the admin dashboard first to get a valid token.", "error");
        }
    </script>
</body>
</html>
